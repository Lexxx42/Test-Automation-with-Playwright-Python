# Работа с несколькими элементами

Все операции над локаторами в playwright, подразумевают один целевой веб-элемент. Если при использовании какого-либо
локатора было найдено более одного совпадения элемента, в таком случае будет вызвано исключение(Exceptions) c
информацией о найденных веб-элементах.

Playwright понимает, когда вам нужно выполнить операцию с несколькими веб-элементами. И для этих случаев предоставляет
методы и подход для работы с такими кейсами.

Вы можете явно указать Playwright, какой элемент использовать при совпадении нескольких элементов.

Если у вас есть список одинаковых элементов, и единственным способом различить их является порядок, вы можете выбрать
конкретный элемент из списка с помощью `locator.count()`, `locator.first`, `locator.last` или `locator.nth(index)`.

Если вам необходимо узнать количество элементов, соответствующих указанному селектору - используйте метод `count()`

`page.get_by_role("button").count()`

Для того чтобы взаимодействовать с конкретным элементом из списка, используйте метод `nth()` с указанием индекса нужного
вам элемента. Указывается именно индекс, а не порядковый номер, по этому счет ведется с 0-го индекса. `nth(0)` выбирает
первый элемент. Учитывайте это при выборе элемента.

`page.get_by_role("listitem").nth(1)`

Методы `locator.first`, `locator.last` вернут первый и последний элемент из списка.

Эти методы не рекомендуются для использования, поскольку при изменении страницы Playwright может нажать на элемент,
который вы не планировали.

Рассмотрим сценарий, в котором необходимо сделать клик по всем элементам чекбокс.

Для примера возьмем сайт https://checks-radios.antonzimaiev.repl.co/

Каждый чекбокс является тегом <input>, по этому локатор будет искать нам все теги на этой странице.

Пишем локатор и сохраняем его результат поиска в переменную.

`сheckbox = page.locator("input")`

Для того чтобы пройтись по всем элементам используем цикл for c встроенной в python функцией `range()`.
Функция `range()` генерирует ряд чисел в рамках заданного диапазона. Т.е для цикла for она будет определять сколько раз
цикл будет повторяться. Для того чтобы указать функции `range()` какое число генерировать, нужно в качестве аргумента
этой функции предать количество найденным локатором веб-элементов

`for i in range(checkbox.count())`

И в конце нам нужно просто произвести клик по одном элементу из списка

`checkbox.nth(i).click()`

Итоговый вариант должен получиться таким.

```python
page.goto('https://checks-radios.antonzimaiev.repl.co/')
checkbox = page.locator("input")
for i in range(checkbox.count()):
    checkbox.nth(i).click()
```

Начиная с версии playwright 1.29 появился специализированный
метод [locator.all()](https://playwright.dev/python/docs/api/class-locator#locator-all) для перебора всех совпадающих
элементов. Если локатор находит несколько элементов, метод `locator.all()` возвращает массив локаторов указывающих на
соответствующие элементы.

```python
for li in page.get_by_role('listitem').all():
    li.click()
```

Перепишем наш код из примера с использованием данного метода.

```python
page.goto('https://checks-radios.antonzimaiev.repl.co/')
checkboxes = page.locator("input")
for checkbox in checkboxes.all():
    checkbox.check()
```
